<app-header (onLogin)="login()" [auth]="auth$"></app-header>

<runner-card
    *ngIf="ready && runner !== null"
    [avatar]="runner.avatar"
    [displayName]="runner.displayName"
    [completedRunsCount]="runner.completedRuns ? runner.completedRuns.length : 0"
    [totalRunsCount]="runs.length"
></runner-card>

<ul *ngIf="ready && runs.length">
    <li *ngFor="let run of runs">
        <run-card
            [slug]="run.slug"
            [image]="run.image"
            [location]="run.location"
            [completed]="didRunnerCompleteRun(run)"
        ></run-card>
    </li>
</ul>

<div *ngIf="!ready">
    <div class="loading-indicator"></div>
</div>

<run-detail *ngIf="selectedRun !== null"
    [image]="selectedRun.image"
    [description]="selectedRun.description"
    [location]="selectedRun.location"
    [slug]="selectedRun.slug"
    [completed]="didRunnerCompleteRun(selectedRun)"
    [isLoggedIn]="(auth$ | async) !== null"
    [isVisitor]="false"
    (onClose)="resetRunDetail()"
    (onCompleted)="onCompleted($event)"
>
</run-detail>